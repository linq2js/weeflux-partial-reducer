{"version":3,"sources":["../index.js"],"names":["length","createReducerForSpecificAction","Function","createSingleReducerForProp","createMultipleReducersForProp","createMultipleReducers","callReducer","reducer","state","context","prop","prevValue","nextValue","reducers","pairs","Object","entries","reduce","nextState","obj","action","split","forEach","actions","Array"],"mappings":"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","file":"index.js","sourcesContent":["function callReducer(reducer, state, context) {\r\n  return reducer instanceof Function ? reducer(state, context) : reducer;\r\n}\r\n\r\nfunction createSingleReducerForProp(prop, reducer) {\r\n  return function(state, context) {\r\n    const prevValue = state[prop];\r\n    const nextValue = callReducer(reducer, prevValue, context);\r\n    if (nextValue !== prevValue) {\r\n      return {\r\n        ...state,\r\n        [prop]: nextValue\r\n      };\r\n    }\r\n    return state;\r\n  };\r\n}\r\n\r\nfunction createMultipleReducers(reducers) {\r\n  const pairs = Object.entries(reducers);\r\n  return function(state, context) {\r\n    return pairs.reduce((nextState, [prop, reducer]) => {\r\n      const prevValue = state[prop];\r\n      const nextValue = callReducer(reducer, prevValue, context);\r\n      if (prevValue !== nextValue) {\r\n        // if unchanged, we create new state from original state\r\n        if (nextState === state) {\r\n          nextState = {\r\n            ...state\r\n          };\r\n        }\r\n        nextState[prop] = nextValue;\r\n      }\r\n      return nextState;\r\n    }, state);\r\n  };\r\n}\r\n\r\nfunction createMultipleReducersForProp(prop, reducers) {\r\n  reducers = Object.entries(reducers).reduce((obj, [action, reducer]) => {\r\n    action.split(/\\s+/).forEach(action => (reducers[action] = reducer));\r\n    return obj;\r\n  }, {});\r\n\r\n  return function(state, context) {\r\n    if (context.action in reducers) {\r\n      const prevValue = state[prop];\r\n      const nextValue = callReducer(\r\n        reducers[context.action],\r\n        prevValue,\r\n        context\r\n      );\r\n\r\n      if (nextValue !== prevValue) {\r\n        return {\r\n          ...state,\r\n          [prop]: nextValue\r\n        };\r\n      }\r\n    }\r\n    return state;\r\n  };\r\n}\r\n\r\nfunction createReducerForSpecificAction(prop, action, reducer) {\r\n  const actions = (action instanceof Array\r\n      ? action\r\n      : action.split(/\\s+/)\r\n  ).reduce((obj, action) => {\r\n    obj[action] = true;\r\n    return obj;\r\n  }, {});\r\n  return function(state, context) {\r\n    if (context.action in actions) {\r\n      const prevValue = state[prop];\r\n      const nextValue = callReducer(reducer, prevValue, context);\r\n      if (prevValue !== nextValue) {\r\n        return {\r\n          ...state,\r\n          [prop]: nextValue\r\n        };\r\n      }\r\n    }\r\n    return state;\r\n  };\r\n}\r\n\r\nexport default function(...args) {\r\n  if (args.length === 3) {\r\n    return createReducerForSpecificAction(...args);\r\n  }\r\n\r\n  if (args.length === 2) {\r\n    if (args[1] instanceof Function) {\r\n      return createSingleReducerForProp(args[0], args[1]);\r\n    }\r\n    return createMultipleReducersForProp(args[0], args[1]);\r\n  }\r\n\r\n  return createMultipleReducers(args[0]);\r\n}\r\n"]}